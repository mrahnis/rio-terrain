language: python
sudo: false
cache:
  directories:
  - "$HOME/.pip-cache/"
env:
  global:
  - PIP_WHEEL_DIR=$HOME/.cache/pip/wheels
  - PIP_FIND_LINKS=file://$HOME/.cache/pip/wheels
python:
- '3.6'
addons:
  apt:
    packages:
    - gdal-bin
    - libgdal-dev
install:
- pip install cython
- pip wheel -r requirements.txt
- pip install .
script: pytest
deploy:
  provider: pypi
  user: mrahnis
  password:
    secure: CmRRhdsphbYRd9gyC2cZ1BZrDT7sz7cylOka7TH9yCTxjKPbxFfsiTv9Z94zJVwaGuXIYwPbgzV/CPHAPzJiNpKyGU4M7MDpU0StQdHIWQgWjhzbEAl6z0i8hdwllcBB7apVLc/uG38T8TW0Evrq1Bu4zuLZrV3NLrMHY1pny7GZglSi10YVKk5mR2Ia0Sycry8dt6f1zxwCRXaM9AYjzWLiXMafFJ+INhNY3staZ6IrtJMKe4iQTA4qM0S4Cu4oQIfhuFh7xrxni+3PKyuQq6YMgStUS4yJ3xjCRgjcP2w03NXmlzdCq3fTwuvpSMNtPp2rfjZTT9nSpKRgn+Z0LQ8svaUioHHWcEteEVCPnJXsXutmK7x4oEqQc05E2/Mn410lgQBa87lO18oQY5oKdyZbZV0f5lICNltA1SdzDHb0ehr4vRz3r5+vTx8xWAz7+FHlgyAqR4nUhmxcK3KmpY+RLJsMmEi7aADi9YoRk8GVXiFl18ShvGVEyfLv/unj0rEHs6g9JpKBzIDYxJlLXN4UkOFEkc8zTBnDnOipLtiA72+hM9aykzrcaVpRAOPEsWdFtdwEw3DfGgME/AzXpM8kDLqaZEqkBnRvriIq8OFHcKWvGyoUxQXVrNnMmOs4xpuvptKLysE4EPdj+wL1uUz3I+meqdTMsZPYvZpVgok=
  on:
    tags: true
    distributions: sdist bdist_wheel
    repo: mrahnis/rio-terrain
  skip_cleanup: true
