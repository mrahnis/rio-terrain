language: python
sudo: false
cache:
  directories:
  - "$HOME/.pip-cache/"
env:
  global:
  - PIP_WHEEL_DIR=$HOME/.cache/pip/wheels
  - PIP_FIND_LINKS=file://$HOME/.cache/pip/wheels
python:
- '3.6'
addons:
  apt:
    packages:
    - gdal-bin
    - libgdal-dev
install:
- pip install cython
- pip wheel -r requirements.txt
- pip install .
script: pytest
deploy:
  provider: pypi
  user: mrahnis
  password:
    secure: Nrqf5PGKCthO2OTxiVJ5p93fZybJytta3asnBZv5PeCGtDl/JfnV5sJK4Qf0YaT+Ui+xihwOTPVUyTV+B0Cwhh+pHWytqkF0W5nEBmnnmqr3nb+UaznWQZOnCtvaMSXzKUcL5qeJZwvioG7oa/m+3SyaWB0lSO4eru9xBzW54Q/goxwguJoVwI5le+1aQz6kBJ32PbuA0UqkZhvJqmHSOXt+8Nli2PiX2vWzdQ8uhwm9aZo/8Su2O5xmpGnmaFZfuUvNXNMLxcftpAfJZ3ijStB1SwgeQwj0yKqXjKQboRSh4AX3ltGaTRnEtIr9xfIJBl4Ixe2/ymu1Kp0S/WejHaLUyo2qP+nv2HiF56fbsJ4+UQQjbWzyUaC3rocAUiq9o//tRuGNovOe6uC0VQtQWZnHxWMLHX88xatfwdB06GTrNohd6XW8iPPIKIML5296enYfshwbbkd9w8ri8eFbz5OQP68npOdJxjTJitaiiUyqrxIcr2YfAuKeWuBsVtb0/NvyanPZWlf3xfdE/mqr9yKclUZ5l7cSmuG7SgP9FXSBsONpbV8Vm33pHL+hzGOfHNbPkpswQzrEWyEcNUFxIiTGRpjohYAhfzs3GsOY/V/vxbFt5R5RgXdapA76j5B7JOUzFRAHtgggGWt874sOyLoXtIp13Dw+veZ6IHMFnVo=
  on:
    tags: true
    distributions: sdist bdist_wheel
    repo: mrahnis/rio-terrain
  skip_cleanup: true
